---
import MainLayout from '../Layouts/MainLayout.astro';
---

<MainLayout title="Login">
    <main class="flex flex-col gap-4 items-center justify-center h-screen">
        <div
            class="flex flex-col gap-2 overflow-hidden font-sans "
        >
            <button id="google" class="btn border-2 border-base-neutral  rounded-xl  p-4">
                <span class="flex gap-2">
                    <!-- <Icon class="w-4 h-4" name="mdi:google" /> -->
                    Login with Google
                </span>
            </button>
        </div>
    </main>
</MainLayout>
 
<script>
    import { $ } from '../lib/dom-selector';

    const { signIn } = await import("auth-astro/client");
 
    const $login = $("#google")

    if($login){

        $login.onclick = async () => {
            // console.log("clicked");
           try {
                signIn("google", {
                    callbackUrl: "/user",
                })
           } catch (error) {
                console.log(error);
            }
         }
    }
</script>